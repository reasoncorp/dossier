%h1= report.class.name.titleize

-klass = params[:options].try(:values_at,:table_class)
%table{class: klass}
  %thead
    %tr
      -if params[:options].try(:[],:count)
        %th
      - report.results.headers.each do |header|
        %th= Dossier::Formatter.titleize(header)
  %tbody
    - report.results.body.each_with_index do |row,i|
      %tr
        -if params[:options] && params[:options][:count]
          %td= i+1
        - row.each do |value|
          %td= value

  - if report.results.footers.any?
    %tfoot
      - report.results.footers.each do |row|
        %tr
          - row.each do |value|
            %th= value

= link_to 'Download CSV', dossier_report_path(:format => 'csv', :options => params[:options]), :class => 'download-csv'
